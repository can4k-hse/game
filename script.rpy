# -----------------------------------------------------------------------------
# init: Transform и Image definitions
# -----------------------------------------------------------------------------
transform Soviet_Captain_Down:
    yoffset 200

# Люди
image Soviet_Captain = At("images/Soviet_captain_resized.png", Soviet_Captain_Down)
define captain = Character("Капитан Серебров", what_cps=30)

# Фон и фотографии (без ведущего слэша в путях)
image DugoutBg   = "images/Dugout_resized.png"
image Stalingrad = "images/photo/stalingrad.jpg"
image Moscow     = "images/photo/moscow.jpg"
image Gitler     = "images/photo/gitler.png"
image Kavkaz     = "images/photo/kavkaz.jpg"


# -----------------------------------------------------------------------------
# ИНИЦИАЛИЗАЦИЯ СТИЛЕЙ
# -----------------------------------------------------------------------------
init:
    # Стиль для информационного текста
    style info_text is default:
        size 36                    # <— вместо text_size
        color "#FFA500"
        outlines [(2, "#000000", 0, 0)]
        xalign 0.5
        yalign 0.8
        xpadding 40
        ypadding 20

# -----------------------------------------------------------------------------
# ЛЕЙБЛ: SPLASHSCREEN
# -----------------------------------------------------------------------------
label splashscreen:
    scene black with fade
    pause 1

    show text "ДО РАССВЕТА" at truecenter with dissolve
    pause 2
    hide text with dissolve

    show text "Последний приказ" at truecenter with dissolve
    pause 2
    hide text with dissolve

    stop music fadeout 2.0
    return

# -----------------------------------------------------------------------------
# ЛЕЙБЛ: START
# -----------------------------------------------------------------------------
label start:
    play music "audio/theme.mp3" fadein 3.0
    pause 2.0

    # Первый текст (можем использовать inline-теги или стиль)
    window hide
    show text Text("Шла осень 1942 года.", style="info_text") with dissolve
    pause 4
    hide text

    # Москва
    scene Moscow with dissolve
    show text Text("После героической победы советских войск под Москвой, \n         вермахт потерял надежду на блицкриг.", style="info_text") with dissolve
    pause 6
    hide text

    # Гитлер
    scene Gitler with dissolve
    show text Text("Адольф Гитлер сосредоточился на проведении масштабного наступления на юге.", style="info_text") with dissolve
    pause 6
    hide text

    # Сталинград
    scene Stalingrad with dissolve
    show text Text("Его целью стал Сталинград — важнейший промышленный и транспортный узел на Волге.", style="info_text") with dissolve
    pause 6
    hide text

    # Кавказ
    scene Kavkaz with dissolve
    show text Text("Если немцам удастся захватить Сталинград, то дороги на районы Кубани и Кавказа открыты.", style="info_text") with dissolve
    pause 6
    hide text

    jump introduction
    return

# -----------------------------------------------------------------------------
# ЛЕЙБЛ: INTRODUCTION — знакомство с героем
# -----------------------------------------------------------------------------
label introduction:

    # Показываем землянку и капитана
    scene DugoutBg with fade
    pause 1.0

    # Включаем инфо-окно и выводим текст
    window show

    # Рассказываем о герое
    "Ты — сержант {b}Николай Сергеев{/b}, солдат 62-й армии."
    "За плечами у тебя — несколько ранений, за одно из них у тебя есть медаль «За отвагу»."
    "Сейчас — осень 1942 года, ты находишься в землянке на северном берегу Волги под Сталинградом."
    "Шум артобстрелов не дают ни сна, ни передышки."
    "В детстве ты мечтал стать инженером, поступил в институт, но война изменила планы навсегда."
    "Ты родом из Тулы — металл и огонь кузнецких цехов давно в твоей крови."
    "Под ногами хрустят опавшие листья, а в воздухе висит сырой туман."
    "В землянке пахнет порохом и влажной древесной стружкой."
    "Ты хранишь в кармане пожелтевшее фото семьи и мягкую шапку, которую связала мать."
    "На улице ветер гонит опавшие листья по промокшей земле."

    # Закрываем окно и переходим к следующей сцене
    window hide
    pause 1.0

    # Переход к вступительной реплике капитана или меню выбора
    jump capitan_welcome
    return

# -----------------------------------------------------------------------------
# ЛЕЙБЛ: CAPITAN_WELCOME — знакомство с капитаном
# -----------------------------------------------------------------------------
label capitan_welcome:

    # Показываем фон и капитана
    scene DugoutBg with fade
    show Soviet_Captain at truecenter with dissolve
    window show

    # Диалог капитана
    captain "Здравия желаю, товарищ сержант. Как поживаешь? Не слишком скучаешь по родному дому?"  
    captain "Ха-ха, понимаю. Война — не курорт, но и не всё ещё так плохо: ты пока цел, а значит еще можешь пригодится, кхм..."  
    captain "Как твоя семья? Не слышал? Я то сам давно сирота, лишь сестра была до войны, да погибла под Киевом... не успела, понимаешь?"  
    captain "..."   
    captain "Вот прогоним фашистов, вернешься к семье. Увидишь мать с отцом, и как будто не было этого кошмара."  
    captain "Ладно, что-то я расчувствовался. Надо беречь и силы, и воду, не тратить её на слезы." 
    captain "Ты видел радиста?"  

    menu:
        "Нет, не видел.": 
            captain "И больше не увидишь, бляха. Нет его больше. И рации нет. Мы без связи.."
        "Да, видел... Точнее то, что от него осталось.": 
            captain "И рацию тоже разнесло, етить его. Мы без связи.." 

    captain "Ладно, Коля. Задание для тебя есть. "
    captain "Сходи к медику и уточни состояние рядового Садикова. Его ранило, но, говорят, он уже на ногах."
    captain "Приведи его сюда, разговор к вам есть."
    captain "Свободен."

    hide Soviet_Captain

    window hide

    # Переход к миссии
    jump mission_briefing